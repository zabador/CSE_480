#!/bin/bash

if [ $1 == "android" ]
then
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Cleaning package
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	mvn clean package &&
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Generating Endpoints
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	mvn appengine:endpoints_get_client_lib &&
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Coping endpoints jar to Android libs/
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	cp target/endpoints-client-libs/myendpoint/target/myendpoint-v1-1.18.0-rc-SNAPSHOT.jar ../cse480pokergame-android/libs && 
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Update app engine with Google server
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	mvn appengine:update &&
	cd ../cse480pokergame-android/ &&
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Compiling Android Project
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	ant clean debug uninstall install
elif [ $1 == ""] 
then
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Cleaning package
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	mvn clean package &&
	echo ***************************************************************************
	echo ***************************************************************************
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Generating Endpoints
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	mvn appengine:endpoints_get_client_lib &&
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Coping endpoints jar to Android libs/
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	cp target/endpoints-client-libs/myendpoint/target/myendpoint-v1-1.18.0-rc-SNAPSHOT.jar ../cse480pokergame-android/libs && 
	echo "***************************************************************************"
	echo "***************************************************************************"
	echo 
	echo                  Update app engine with Google server
	echo 
	echo "***************************************************************************"
	echo "***************************************************************************"
	mvn appengine:update

else
	echo "Error running script"
fi
